# file: .github/workflows/release.yml
# version: 2.0.1
# guid: d6e7f8a9-b0c1-2345-d901-456789012345

name: Release

on:
  push:
    branches:
      - main
    tags:
      - 'v*.*.*'
  workflow_dispatch:
    inputs:
      release-type:
        description: 'Release type (auto, major, minor, patch)'
        required: false
        type: choice
        options:
          - auto
          - major
          - minor
          - patch
        default: 'auto'

permissions:
  contents: write
  packages: write
  attestations: write
  id-token: write

jobs:
  release:
    name: Automated Release
    uses: jdfalk/ghcommon/.github/workflows/reusable-release.yml@6ed97545daef53051405663133e18fde036645e1
    with:
      release-type: ${{ inputs.release-type || 'auto' }}
      build-target: 'all'
    secrets: inherit
